#!/bin/bash

#case $BLOCK_BUTTON in
	#1) pkill -RTMIN+5 i3blocks && notify-send "BTT refreshed";;
#esac

value=$(coinmon -f btt | sed "s/\s*//g ; s/â”€//g ; s/â”¼//g ; s/â”¤//g ; s/â”˜//g ; s/â”œ//g ; s/â””//g ; s/â”´//g ; s/â”¬//g ; s/â”//g ; s/â”Œ//g ; s/â”‚/;/g ; s/^Data.*//g" | grep BTT | awk -F';' '{print $4}' | cut -d'm' -f 2 | grep -Po "^[0-9]*\.[0-9]..." | awk '{print $1 " * 14918"}' | bc | cut -d'.' -f 1 | grep -m1 "")

previous=$(cat ~/.cache/BittorentValue)

if [ -z "$value" ]
then  
	echo "ðŸ´â€â˜ ï¸No Data"
else
	if [ $value -lt $previous ]
	then
		echo "ðŸ´â€â˜ ï¸ Rp.$valueðŸ”»"
	elif [ $value -gt $previous ]
	then
		echo " ðŸ´â€â˜ ï¸ Rp.$valueðŸ”º"
	else
		echo " ðŸ´â€â˜ ï¸ Rp.$value"
	fi
fi

echo "$value" > ~/.cache/BittorentValue

