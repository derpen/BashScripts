#!/bin/bash

#case $BLOCK_BUTTON in
	#1) pkill -RTMIN+6 i3blocks && notify-send "Doge refreshed";;
#esac

value=$(coinmon -f doge | grep "\|Coin" | sed "s/\s*//g ; s/â”€//g ; s/â”¼//g ; s/â”¤//g ; s/â”˜//g ; s/â”œ//g ; s/â””//g ; s/â”´//g ; s/â”¬//g ; s/â”//g ; s/â”Œ//g ; s/â”‚/;/g ; s/^Data.*//g" | grep DOGE | awk -F';' '{print $4}' | cut -d'm' -f 2 | grep -Po "^[0-9]*\.[0-9]..." | awk '{print $1 " * 14918"}' | bc | cut -d'.' -f 1)

previous=$(cat ~/.cache/DogeValue)

if [ -z "$value" ]
then
	echo "ðŸ¶No Data"
else
	if [ $value -lt $previous ]
	then
		echo "ðŸ¶Rp.$valueðŸ”»"
	elif [ $value -gt $previous ]
	then
		echo "ðŸ¶Rp.$valueðŸ”º"
	else
		echo "ðŸ¶Rp.$value"
	fi
fi

echo "$value" > ~/.cache/DogeValue
